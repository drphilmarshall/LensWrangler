<!DOCTYPE html>
<meta charset="utf-8">
<head>

	<title>Lens Wrangler</title>
    
  <script type="text/javascript" src="lib/d3.js"></script>
	<script type="text/javascript" src="lib/lens.js"></script>
	<script type="text/javascript" src="lib/canvas.js"></script>
	<script type="text/javascript" src="lenswrangler.js"></script>
  
  <!--
  Development:
  <script src="../lensjs/lens.js"></script>
	<script src="../lensjs/canvas.js"></script>
	<script src="lenswrangler.js"></script>
  -->
    
	<script type="text/javascript" src="lib/conrec.js"></script>
	<!--[if lt IE 9]>
    <script src="excanvas.min.js"></script>
  <![endif]-->
	<script type="text/javascript">

	window.onload = function(e){ 

    // Create a LensWrangler object. The ID is that of the <div>
    var wrangler = new LensWrangler({
      id:'lenswrangler-massmodel',
      massmodel: 'lenswrangler-massmodel',
      prediction: 'lenswrangler-prediction',
      pixscale: 0.0375
    });

    // Attach a function to the load event
		var offmsg = "Create a lens model to capture the blue arcs";
		wrangler.bind("mouseout",function(){
			this.setStatus(offmsg);
		}).bind("loadimage",function(){
			this.setStatus(offmsg);
		});
    
    
    // Using Brian C's Marking Surface library!!!
    var ms = new MarkingSurface({
      inputName: 'mass-model',
      tool: MarkingSurface.EllipseTool
    });
    var containerEl = document.getElementById("marking-container");
    containerEl.appendChild(ms.el);
    
    var img = new Image();
    img.onload = function() {
      var width = img.width;
      var height = img.height;
      
      ms.addShape('image', {
        'xlink:href': img.src,
        width: width,
        height: height
      });
      ms.svg.attr({
        width: 400,
        height: 400
      });
      ms.rescale(0, 0, width, height);
    }
    img.src = "http://lenszoo.files.wordpress.com/2013/12/asw0009cjs-zoomed.jpg";
  }
	</script>

	<style type="text/css">
	body {
		font-family: 'Myriad Pro',Calibri,Helvetica,Arial,sans-serif;
		background-color: black;
		color: white;
	}
  
	h1, h2, h3, h4 { font-family: 'Lucida Grande','Calibri',Helvetica,Arial,sans-serif; }
	h1 { margin-bottom: 0.5em; }
  
	a { color: #999999; }
	
  #lenswrangler, .lensimg, #marking-container {
    border: 2px solid #606060;
  }
  
  #marking-container {
    width: 400px;
    height: 400px;
  }
	
  code { color: #999999; }
	pre { color: #999999; }
	
  #main {
    position: relative;
    height:auto;
  }
  
	#status { margin-bottom: 0.5em; }
	#lenswrangler, #lenswrangler-massmodel, #lenswrangler-prediction, .lensimg {
    width:400px; height:400px;
  }
  
	#forkme_banner {
		background: url("http://slowe.github.com/graph/images/blacktocat.png") no-repeat scroll 95% 50% #0090FF;
		border-bottom-left-radius: 2px;
		border-bottom-right-radius: 2px;
		box-shadow: 0 0 10px rgba(0, 0, 0, 0.5);
		color: #FFFFFF;
		display: block;
		font-weight: 700;
		padding: 10px 50px 10px 10px;
		position: absolute;
		right: 10px;
		top: 0;
		z-index: 10;
		text-decoration: none;
	}
  
	#page {
		margin: 20px;
	}
  
  .viewer {
    display: block;
  }
  
  .inline {
    position: relative;
    display: inline;
  }
  .inline:last-of-type {
    margin-left: 10px;
  }
  
  .inline-block {
    display: inline-block;
  }
  
  .absolute {
    position: absolute;
  }
  
	#footer {
		position: absolute;
		margin: 20px;
		top: 520px;
	}
  
  
  
	</style>
</head>

<body>
	<div id="page">
		<header class="inner">
			<a id="forkme_banner" href="https://github.com/drphilmarshall/LensWrangler">Fork Me on GitHub</a>
			<h1>Lens Wrangler</h1>
		</header>
	
		<div id="status">Loading image...</div>
		<br>
    
    <div class="viewer">
    
      <!-- left panel for model -->
      <div class="inline">
        <!-- background image is always absolute positions -->
        <div id="lenswrangler-massmodel" class="absolute inline-block"></div>
        <!-- <div id="marking-container" class="inline-block"></div> -->
        <img class="lensimg" src="http://lenszoo.files.wordpress.com/2013/12/asw0009cjs-zoomed.jpg" />
      </div>
    
      <!-- right panel for prediction -->
      <div class="inline">
        <!--  lenswrangler class needs to be displayed as inline-block -->
        <div id="lenswrangler-prediction" class="absolute inline-block"></div>
        <img class="lensimg" src="http://lenszoo.files.wordpress.com/2013/12/asw0009cjs-zoomed.jpg" />
      </div>
    
    </div>
    
    <p align="left"><a href="https://github.com/drphilmarshall/LensWrangler">https://github.com/drphilmarshall/LensWrangler</a></p>
	</div>

    <!-- FOOTER  -->
    <div id="footer" class="outer">
      <footer class="inner">
        <p class="copyright">LensWrangler maintained by <a href="https://github.com/drphilmarshall">Phil Marshall</a></p>
        <p>Published with <a href="http://pages.github.com">GitHub Pages</a></p>
      </footer>
    </div>
    
    
    <script type="text/javascript" src="lib/marking/marking-surface.js"></script>
    <script type="text/javascript" src="lib/marking/tools/ellipse.js"></script>
</body>
</html>
